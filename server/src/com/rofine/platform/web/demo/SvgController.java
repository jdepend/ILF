package com.rofine.platform.web.demo;

import com.rofine.platform.web.controller.BaseController;
import com.rofine.platform.web.util.DateUtil;
import com.rofine.platform.web.util.JsonUtil;
import net.sf.json.JSONArray;
import org.apache.commons.lang.time.DateFormatUtils;
import org.apache.commons.lang.time.DateUtils;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import java.text.DecimalFormat;
import java.util.Date;
import java.util.Random;

/**
 * Created by Eric on 2016/1/12.
 */
@Controller
@RequestMapping(value = "svg")
public class SvgController extends BaseController {

    @RequestMapping(value = "/index", method = RequestMethod.GET)
    public String index(){
        return "test/svg";
    }

    @ResponseBody
    @RequestMapping("/initdata")
    public String getInitData(){

        return "["+
                "[1433116800000,130.28,131.39,130.05,130.54,32112797],\n" +
                "[1433203200000,129.86,130.66,129.32,129.96,33667627],\n" +
                "[1433289600000,130.66,130.94,129.90,130.12,30983542],\n" +
                "[1433376000000,129.58,130.58,128.91,129.36,38450118],\n" +
                "[1433462400000,129.50,129.69,128.36,128.65,35626800],\n" +
                "[1433721600000,128.90,129.21,126.83,127.80,52674786],\n" +
                "[1433808000000,126.70,128.08,125.62,127.42,56075420],\n" +
                "[1433894400000,127.92,129.34,127.85,128.88,39087250],\n" +
                "[1433980800000,129.18,130.18,128.48,128.59,35390887],\n" +
                "[1434067200000,128.18,128.33,127.11,127.17,36886246],\n" +
                "[1434326400000,126.10,127.24,125.71,126.92,43988946],\n" +
                "[1434412800000,127.03,127.85,126.37,127.60,31494131],\n" +
                "[1434499200000,127.72,127.88,126.74,127.30,32918071],\n" +
                "[1434585600000,127.23,128.31,127.22,127.88,35407220],\n" +
                "[1434672000000,127.71,127.82,126.40,126.60,54716887],\n" +
                "[1434931200000,127.49,128.06,127.08,127.61,34039345],\n" +
                "[1435017600000,127.48,127.61,126.88,127.03,30268863],\n" +
                "[1435104000000,127.21,129.80,127.12,128.11,55280855],\n" +
                "[1435190400000,128.86,129.20,127.50,127.50,31938100],\n" +
                "[1435276800000,127.67,127.99,126.51,126.75,44066841],\n" +
                "[1435536000000,125.46,126.47,124.48,124.53,49161427],\n" +
                "[1435622400000,125.57,126.12,124.86,125.42,44370682],\n" +

                "[1435708800000,126.90,126.94,125.99,126.60,30238811],\n" +
                "[1435795200000,126.43,126.69,125.77,126.44,27210952],\n" +
                "[1436140800000,124.94,126.23,124.85,126.00,28060431],\n" +
                "[1436227200000,125.89,126.15,123.77,125.69,46946811],\n" +
                "[1436313600000,124.48,124.64,122.54,122.57,60761614],\n" +
                "[1436400000000,123.85,124.06,119.22,120.07,78595038],\n" +
                "[1436486400000,121.94,123.85,121.21,123.28,61354474],\n" +
                "[1436745600000,125.03,125.76,124.32,125.66,41440538],\n" +
                "[1436832000000,126.04,126.37,125.04,125.61,31768139],\n" +
                "[1436918400000,125.72,127.15,125.58,126.82,33649200],\n" +
                "[1437004800000,127.74,128.57,127.35,128.51,36222447],\n" +
                "[1437091200000,129.08,129.62,128.31,129.62,46164710],\n" +
                "[1437350400000,130.97,132.97,130.70,132.07,58900203],\n" +
                "[1437436800000,132.85,132.92,130.32,130.75,76756427],\n" +
                "[1437523200000,121.99,125.50,121.99,125.22,115450607],\n" +
                "[1437609600000,126.20,127.09,125.06,125.16,50999452],\n" +
                "[1437696000000,125.32,125.74,123.90,124.50,42162332],\n" +
                "[1437955200000,123.09,123.61,122.12,122.77,44455540],\n" +
                "[1438041600000,123.38,123.91,122.55,123.38,33618097],\n" +
                "[1438128000000,123.15,123.50,122.27,122.99,37011653],\n" +
                "[1438214400000,122.32,122.57,121.71,122.37,33628268],\n" +
                "[1438300800000,122.60,122.64,120.91,121.30,42884953],\n" +

                "[1438560000000,121.50,122.57,117.52,118.44,69975968],\n" +
                "[1438646400000,117.42,117.70,113.25,114.64,124138623],\n" +
                "[1438732800000,112.95,117.44,112.10,115.40,99312613],\n" +
                "[1438819200000,115.97,116.50,114.12,115.13,52903040],\n" +
                "[1438905600000,114.58,116.25,114.50,115.52,38670405],\n" +
                "[1439164800000,116.53,119.99,116.53,119.72,54951597],\n" +
                "[1439251200000,117.81,118.18,113.33,113.49,97082814],\n" +
                "[1439337600000,112.53,115.42,109.63,115.24,101685610],\n" +
                "[1439424000000,116.04,116.40,114.54,115.15,48535789],\n" +
                "[1439510400000,114.32,116.31,114.01,115.96,42929516],\n" +
                "[1439769600000,116.04,117.65,115.50,117.16,40884745],\n" +
                "[1439856000000,116.43,117.44,116.01,116.50,34560708],\n" +
                "[1439942400000,116.10,116.52,114.68,115.01,48286510],\n" +
                "[1440028800000,114.08,114.35,111.63,112.65,68501622],\n" +
                "[1440115200000,110.43,111.90,105.64,105.76,128275471],\n" +
                "[1440374400000,94.87,108.80,92.00,103.12,162206292],\n" +
                "[1440460800000,111.11,111.11,103.50,103.74,103601599],\n" +
                "[1440547200000,107.08,109.89,105.05,109.69,96774611],\n" +
                "[1440633600000,112.23,113.24,110.02,112.92,84616056],\n" +
                "[1440720000000,112.17,113.31,111.54,113.29,53164407],\n" +
                "[1440979200000,112.03,114.53,112.00,112.76,56229271],\n" +

                "[1441065600000,110.15,111.88,107.36,107.72,76845860],\n" +
                "[1441152000000,110.23,112.34,109.13,112.34,61888812],\n" +
                "[1441238400000,112.49,112.78,110.04,110.37,53233940],\n" +
                "[1441324800000,108.97,110.45,108.51,109.27,49996311],\n" +
                "[1441670400000,111.75,112.56,110.32,112.31,54843626],\n" +
                "[1441756800000,113.76,114.02,109.77,110.15,85010804],\n" +
                "[1441843200000,110.27,113.28,109.90,112.57,62675234],\n" +
                "[1441929600000,111.79,114.21,111.76,114.21,49915473],\n" +
                "[1442188800000,116.58,116.89,114.86,115.31,58363431],\n" +
                "[1442275200000,115.93,116.53,114.42,116.28,43341155],\n" +
                "[1442361600000,116.25,116.54,115.44,116.41,37173489],\n" +
                "[1442448000000,115.66,116.49,113.72,113.92,64112641],\n" +
                "[1442534400000,112.21,114.30,111.87,113.45,74285291],\n" +
                "[1442793600000,113.67,115.37,113.66,115.21,50221965],\n" +
                "[1442880000000,113.38,114.18,112.52,113.40,50346159],\n" +
                "[1442966400000,113.63,114.72,113.30,114.32,35756716],\n" +
                "[1443052800000,113.25,115.50,112.37,115.00,50219475],\n" +
                "[1443139200000,116.44,116.69,114.02,114.71,56151926],\n" +
                "[1443398400000,113.85,114.57,112.44,112.44,52109011],\n" +
                "[1443484800000,112.83,113.51,107.86,109.06,73365384],\n" +
                "[1443571200000,110.17,111.54,108.73,110.30,66473033],\n" +

                "[1443657600000,109.07,109.62,107.31,109.58,63929100],\n" +
                "[1443744000000,108.01,111.01,107.55,110.38,58019758],\n" +
                "[1444003200000,110.08,111.37,109.07,110.78,52064743],\n" +
                "[1444089600000,110.63,111.74,109.76,111.31,48856977],\n" +
                "[1444176000000,110.47,111.77,109.41,110.78,46765550],\n" +
                "[1444262400000,110.06,110.19,108.21,109.50,61979577],\n" +
                "[1444348800000,111.64,112.28,109.49,112.12,52766140],\n" +
                "[1444608000000,112.73,112.75,111.44,111.60,30467204],\n" +
                "[1444694400000,110.82,112.45,110.68,111.79,33049256],\n" +
                "[1444780800000,111.29,111.52,109.56,110.21,44462449],\n" +
                "[1444867200000,110.93,112.10,110.49,111.86,37673452],\n" +
                "[1444953600000,111.78,112.00,110.53,111.04,39232609],\n" +
                "[1445212800000,110.80,111.75,110.11,111.73,29759153],\n" +
                "[1445299200000,111.34,114.17,110.82,113.77,48967763],\n" +
                "[1445385600000,114.00,115.58,113.70,113.76,42326974],\n" +
                "[1445472000000,114.33,115.50,114.10,115.50,41654089],\n" +
                "[1445558400000,118.77,119.23,116.33,119.08,59366914],\n" +
                "[1445817600000,118.08,118.13,114.92,115.28,66333781],\n" +
                "[1445904000000,115.40,116.54,113.99,114.55,69884400],\n" +
                "[1445990400000,117.58,119.30,116.06,119.27,85551352],\n" +
                "[1446076800000,118.70,120.69,118.27,120.53,51227334],\n" +
                "[1446163200000,120.99,121.22,119.45,119.50,49365254],\n" +

                "[1446422400000,120.80,121.36,119.61,121.18,32203267],\n"+
                "[1446508800000,120.79,123.49,120.70,122.57,45518976],\n"+
                "[1446595200000,122.56,123.82,121.62,122.00,44886050],\n"+
                "[1446681600000,121.85,122.69,120.18,120.92,39552680],\n"+
                "[1446768000000,121.08,121.81,120.62,121.06,33042283],\n"+
                "[1447027200000,120.96,121.81,120.05,120.57,33871405],\n"+
                "[1447113600000,116.90,118.07,116.06,116.77,59127931],\n"+
                "[1447200000000,116.37,117.42,115.21,116.11,45217971],\n"+
                "[1447286400000,116.26,116.82,115.65,115.72,32525579],\n"+
                "[1447372800000,115.20,115.57,112.27,112.34,45812403],\n"+
                "[1447632000000,111.38,114.24,111.00,114.18,38106701],\n"+
                "[1447718400000,114.92,115.05,113.32,113.69,27616939],\n"+
                "[1447804800000,115.76,117.49,115.50,117.29,46674697],\n"+
                "[1447891200000,117.64,119.75,116.76,118.78,43295820],\n"+
                "[1447977600000,119.20,119.92,118.85,119.30,34287096],\n"+
                "[1448236800000,119.27,119.73,117.34,117.75,32482528],\n"+
                "[1448323200000,117.33,119.35,117.12,118.88,42803172],\n"+
                "[1448409600000,119.21,119.23,117.92,118.03,21388308],\n"+
                "[1448582400000,118.29,118.41,117.60,117.81,13046445],\n"+
                "[1448841600000,118.49,119.41,117.75,118.30,39180322],\n"+

                "[1448928000000,118.75,118.81,116.86,117.34,34852374],\n"+
                "[1449014400000,117.34,118.11,116.08,116.28,33386563],\n"+
                "[1449100800000,115.24,116.79,114.22,115.20,41569509],\n"+
                "[1449187200000,115.29,119.25,115.11,119.03,57776977],\n"+
                "[1449446400000,118.32,119.86,117.81,118.28,32084249],\n"+
                "[1449532800000,117.52,118.60,116.86,118.23,34309450],\n"+
                "[1449619200000,115.30,117.69,115.08,115.62,46361357],\n"+
                "[1449705600000,116.04,116.94,115.51,116.17,29212727],\n"+
                "[1449792000000,115.19,115.39,112.85,113.18,46886161],\n"+
                "[1450051200000,112.18,112.68,109.79,112.48,65003609],\n"+
                "[1450137600000,111.94,112.80,110.35,110.49,53323105],\n"+
                "[1450224000000,111.07,111.99,108.80,111.34,56238467],\n"+
                "[1450396800000,108.91,109.52,105.81,106.03,96453327],\n"+
                "[1450656000000,107.28,107.37,105.57,107.33,47590610],\n"+
                "[1450742400000,107.40,107.72,106.45,107.23,32789367],\n"+
                "[1450828800000,107.27,108.85,107.20,108.61,32657354],\n"+
                "[1450915200000,109.00,109.00,107.95,108.03,13596680],\n"+
                "[1451260800000,107.59,107.69,106.18,106.82,26704210],\n"+
                "[1451347200000,106.96,109.43,106.86,108.74,30931243],\n"+
                "[1451433600000,108.58,108.70,107.18,107.32,25213777],\n"+
                "[1451520000000,107.01,107.03,104.82,105.26,40912316],\n"+

                "[1451865600000,102.61,105.37,102.00,105.35,67649387],\n"+
                "[1451952000000,105.75,105.85,102.41,102.71,55790992],\n"+
                "[1452038400000,100.56,102.37,99.87,100.70,68457388],\n"+
                "[1452124800000,98.68,100.13,96.43,96.45,81094428],\n"+
                "[1452211200000,98.55,99.11,96.76,96.96,70798016],\n"+
                "[1452470400000,98.97,99.06,97.34,98.53,49739377]]"
                ;


    }


    @ResponseBody
    @RequestMapping("/updatedata/{maxdate}")
    public String updateData(@PathVariable long maxdate){
        Random ra = new Random();
        Date dt = null;
        if(maxdate>0l){
            dt = new Date(maxdate);
        }else{
            dt = new Date();
        }
        int num = 7;
        JSONArray array = new JSONArray();
        for(int i=0;i<num;i++){
            dt = DateUtils.addDays(dt,1);
            JSONArray item = new JSONArray();
            item.add(dt.getTime());
            item.add(getRandom(ra,120,100));
            item.add(getRandom(ra,120,100));item.add(getRandom(ra,120,100));
            item.add(getRandom(ra,120,100));item.add((int)(ra.nextDouble() * (90000000)));
            array.add(item);
        }
        return array.toString();
    }


    private double getRandom(Random ra,int min,int max){
        DecimalFormat df=new DecimalFormat(".##");
        return Double.parseDouble(df.format(ra.nextDouble() * (max-min)+min));
    }

    public static void main (String[] arg){

        Random ra = new Random();
        while(true)
        System.out.println((int)(ra.nextDouble() * (90000000)));
    }

}
